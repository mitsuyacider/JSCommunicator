{"version":3,"sources":["webpack:///./src/js/NativeCommunicator.js","webpack:///./src/js/Lane.js","webpack:///src/App.vue","webpack:///./src/App.vue?6ae6","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/vuex/store.js"],"names":["nativeCommunicator","data","json","JSON","parse","console","log","message","store","dispatch","window","webkit","messageHandlers","helloNative","postMessage","dic","postData","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","onTapWord","global","NativeCommunicator","Lane","classCallCheck_default","this","position","x","y","speed","text","fontSize","fillStyle","App","name","posY","sentenceList","wordList","column","computed","screenSize","screen","context","document","getElementById","getContext","mounted","Math","floor","width","i","sentence","js_Lane","random","push","_i","_x","word","loopAnimation","onclick","onClickOnCanvas","methods","e","clientX","clientY","clickedWord","find","length","undefined","article","postWordData","clearCanvas","injectLanes","requestAnimationFrame","height","clearRect","lanes","lane","drawLane","wordWidth","measureText","font","fillRect","textBaseline","self","split","forEach","elm","Array","prototype","call","ch","j","fillText","selectortype_template_index_0_src_App","render","_h","$createElement","_c","_self","attrs","id","_v","staticRenderFns","src_App","__webpack_require__","normalizeComponent","ssrContext","Vue","config","productionTip","el","components","template","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vuex__","use","Vuex","__webpack_exports__","Store","namespaced","state","mutations","setMessage","actions","commit","getters","getMessageFromNative"],"mappings":"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","file":"static/js/app.46fe9c12c8269a347846.js","sourcesContent":["import store from '@/vuex/store'\n\nclass NativeCommunicator {\n  helloJavascript (data) {\n    let json = JSON.parse(data)\n    console.log('helloJavascript:', json.message)\n    store.dispatch('setMessage', json.message)\n  }\n\n  helloNative (message) {\n    console.log('helloNative:', message)\n    window.webkit.messageHandlers.helloNative.postMessage(message)\n  }\n\n  /*\n    NOTE: 選択されたワードデータを送信\n    @param dic : dictionary データ\n  */\n  postWordData (dic) {\n    const postData = JSON.stringify(dic)\n    window.webkit.messageHandlers.onTapWord.postMessage(postData)\n  }\n}\n\nconst nativeCommunicator = new NativeCommunicator()\nexport default nativeCommunicator\n\nglobal.NativeCommunicator = nativeCommunicator\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/NativeCommunicator.js","export default class Lane {\n  constructor () {\n    this.position = {}\n    this.position.x = 0\n    this.position.y = 0\n    this.speed = 0\n    this.text = ''\n    this.fontSize = 10\n    this.fillStyle = 'rgb(255, 255, 255)'\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/Lane.js","<template>\n  <div id=\"app\">\n    <canvas id=\"world\" :width=screenSize.width :height=screenSize.height></canvas>\n    <p>hello</p>\n  </div>\n</template>\n\n<script>\nimport NativeCommunicator from '@/js/NativeCommunicator'\nimport Lane from '@/js/Lane'\n\nexport default {\n  name: 'App',\n  data () {\n    return {\n      posY: 0,\n      sentenceList: [],\n      wordList: [],\n      column: 12\n    }\n  },\n  computed: {\n    screenSize: function () {\n      return window.screen\n    },\n    context: function () {\n      const canvas = document.getElementById('world')\n      const context = canvas.getContext('2d')\n      return context\n    }\n  },\n  mounted () {\n    this.posY = 0\n    const lineSpace = 5\n    const fontSize = Math.floor((this.screenSize.width - this.column * lineSpace) / this.column)\n\n    // NOTE: 各レーン情報を作成する\n    for (let i = 0; i < this.column; i++) {\n      const x = (fontSize + lineSpace) * i\n      const sentence = new Lane()\n      sentence.position.x = x\n      sentence.position.y = 0\n      sentence.fontSize = fontSize\n      sentence.speed = Math.random() * 1 + 0.1\n      sentence.text = 'この作品の評価は高く、多くの鑑賞者から絶賛されています。' + i\n      sentence.fillStyle = 'rgb(100, 100, 100)'\n      this.sentenceList.push(sentence)\n    }\n\n    // NOTE: 選択可能なワード情報を作成する\n    for (let i = 0; i < 5; i++) {\n      const x = (fontSize + lineSpace) * i\n      const word = new Lane()\n      word.position.x = x\n      word.position.y = 0\n      word.fontSize = Math.random() * 20 + 20\n      word.speed = Math.random() * 1 + 0.2\n      word.text = '右手' + i\n      word.fillStyle = 'rgb(255, 255, 255)'\n      this.wordList.push(word)\n    }\n\n    this.loopAnimation()\n\n    const canvas = document.getElementById('world')\n    // クリックイベントの登録\n    canvas.onclick = this.onClickOnCanvas\n  },\n  methods: {\n    onClickOnCanvas: function (e) {\n      // NOTE: Check if the clicked position is inside bounding box of word.\n      const x = e.clientX\n      const y = e.clientY\n      const clickedWord = this.wordList.find(word => word.position.x < x && word.position.x + word.fontSize > x && word.position.y < y && word.position.y + word.fontSize * word.text.length > y)\n\n      if (clickedWord !== undefined) {\n        console.log(clickedWord)\n        // NOTE: Notify the clicked word data to native\n        const data = {\n          word: clickedWord.text,\n          article: 'AXIS Web'\n        }\n        NativeCommunicator.postWordData(data)\n      }\n    },\n    loopAnimation: function () {\n      this.clearCanvas()\n\n      this.injectLanes(this.sentenceList)\n      this.injectLanes(this.wordList)\n\n      requestAnimationFrame(this.loopAnimation)\n    },\n    clearCanvas: function () {\n      const width = this.screenSize.width\n      const height = this.screenSize.height\n      this.context.clearRect(0, 0, width, height)\n    },\n    // ワードリストを流し込む\n    injectLanes (lanes) {\n      for (let i = 0; i < lanes.length; i++) {\n        const lane = lanes[i]\n        this.drawLane(lane)\n        lane.position.y -= lane.speed\n        const wordWidth = this.context.measureText('あ').width\n\n        if (lane.position.y + wordWidth * lane.text.length < 0) {\n          lane.position.y = this.screenSize.height\n        }\n      }\n    },\n    drawLane: function (lane) {\n      const fontSize = lane.fontSize\n      this.context.font = `${fontSize}px メイリオ`\n      this.context.fillStyle = 'rgb(255, 255, 255)'\n      const text = lane.text\n      const x = lane.position.x\n      const y = lane.position.y\n\n      // NOTE: Draw background\n      const wordWidth = this.context.measureText('あ').width\n      this.context.fillStyle = 'rgb(0, 0, 0)'\n      this.context.fillRect(x, y, wordWidth, wordWidth * text.length)\n\n      // NOTE: Set anchor point\n      this.context.textBaseline = 'top'\n\n      // NOTE: Draw word(sentence)\n      this.context.fillStyle = lane.fillStyle\n      const textList = text.split('\\n')\n      const self = this\n      textList.forEach(function (elm, i) {\n        Array.prototype.forEach.call(elm, function (ch, j) {\n          self.context.fillText(ch, x - wordWidth * i, y + wordWidth * j)\n        })\n      })\n    }\n  }\n}\n</script>\n\n<style>\ncanvas {\n    position: absolute;\n    margin: auto;\n    left: 0px;\n    right: 0px;\n    top: 0px;\n    bottom: 0px;\n    box-shadow: 0px 0px 4px 0px #aaa;\n    background: rgb(0, 0, 0);\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('canvas',{attrs:{\"id\":\"world\",\"width\":_vm.screenSize.width,\"height\":_vm.screenSize.height}}),_vm._v(\" \"),_c('p',[_vm._v(\"hello\")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-dba7db28\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-dba7db28\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-dba7db28\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  namespaced: true,\n  state: {\n    message: ''\n  },\n  mutations: {\n    setMessage (state, data) {\n      state.message = data\n    }\n  },\n  actions: {\n    setMessage (context, data) {\n      context.commit('setMessage', data)\n    }\n  },\n  getters: {\n    getMessageFromNative (state) {\n      return state.message\n    }\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/vuex/store.js"],"sourceRoot":""}